{"filter":false,"title":"jquery.simulate.js","tooltip":"/js/jquery.simulate.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":330,"column":13},"action":"insert","lines":[" /*!"," * jQuery Simulate v@VERSION - simulate browser mouse and keyboard events"," * https://github.com/jquery/jquery-simulate"," *"," * Copyright jQuery Foundation and other contributors"," * Released under the MIT license."," * http://jquery.org/license"," *"," * Date: @DATE"," */","",";(function( $, undefined ) {","","var rkeyEvent = /^key/,","\trmouseEvent = /^(?:mouse|contextmenu)|click/;","","$.fn.simulate = function( type, options ) {","\treturn this.each(function() {","\t\tnew $.simulate( this, type, options );","\t});","};","","$.simulate = function( elem, type, options ) {","\tvar method = $.camelCase( \"simulate-\" + type );","","\tthis.target = elem;","\tthis.options = options;","","\tif ( this[ method ] ) {","\t\tthis[ method ]();","\t} else {","\t\tthis.simulateEvent( elem, type, options );","\t}","};","","$.extend( $.simulate, {","","\tkeyCode: {","\t\tBACKSPACE: 8,","\t\tCOMMA: 188,","\t\tDELETE: 46,","\t\tDOWN: 40,","\t\tEND: 35,","\t\tENTER: 13,","\t\tESCAPE: 27,","\t\tHOME: 36,","\t\tLEFT: 37,","\t\tNUMPAD_ADD: 107,","\t\tNUMPAD_DECIMAL: 110,","\t\tNUMPAD_DIVIDE: 111,","\t\tNUMPAD_ENTER: 108,","\t\tNUMPAD_MULTIPLY: 106,","\t\tNUMPAD_SUBTRACT: 109,","\t\tPAGE_DOWN: 34,","\t\tPAGE_UP: 33,","\t\tPERIOD: 190,","\t\tRIGHT: 39,","\t\tSPACE: 32,","\t\tTAB: 9,","\t\tUP: 38","\t},","","\tbuttonCode: {","\t\tLEFT: 0,","\t\tMIDDLE: 1,","\t\tRIGHT: 2","\t}","});","","$.extend( $.simulate.prototype, {","","\tsimulateEvent: function( elem, type, options ) {","\t\tvar event = this.createEvent( type, options );","\t\tthis.dispatchEvent( elem, type, event, options );","\t},","","\tcreateEvent: function( type, options ) {","\t\tif ( rkeyEvent.test( type ) ) {","\t\t\treturn this.keyEvent( type, options );","\t\t}","","\t\tif ( rmouseEvent.test( type ) ) {","\t\t\treturn this.mouseEvent( type, options );","\t\t}","\t},","","\tmouseEvent: function( type, options ) {","\t\tvar event, eventDoc, doc, body;","\t\toptions = $.extend({","\t\t\tbubbles: true,","\t\t\tcancelable: (type !== \"mousemove\"),","\t\t\tview: window,","\t\t\tdetail: 0,","\t\t\tscreenX: 0,","\t\t\tscreenY: 0,","\t\t\tclientX: 1,","\t\t\tclientY: 1,","\t\t\tctrlKey: false,","\t\t\taltKey: false,","\t\t\tshiftKey: false,","\t\t\tmetaKey: false,","\t\t\tbutton: 0,","\t\t\trelatedTarget: undefined","\t\t}, options );","","\t\tif ( document.createEvent ) {","\t\t\tevent = document.createEvent( \"MouseEvents\" );","\t\t\tevent.initMouseEvent( type, options.bubbles, options.cancelable,","\t\t\t\toptions.view, options.detail,","\t\t\t\toptions.screenX, options.screenY, options.clientX, options.clientY,","\t\t\t\toptions.ctrlKey, options.altKey, options.shiftKey, options.metaKey,","\t\t\t\toptions.button, options.relatedTarget || document.body.parentNode );","","\t\t\t// IE 9+ creates events with pageX and pageY set to 0.","\t\t\t// Trying to modify the properties throws an error,","\t\t\t// so we define getters to return the correct values.","\t\t\tif ( event.pageX === 0 && event.pageY === 0 && Object.defineProperty ) {","\t\t\t\teventDoc = event.relatedTarget.ownerDocument || document;","\t\t\t\tdoc = eventDoc.documentElement;","\t\t\t\tbody = eventDoc.body;","","\t\t\t\tObject.defineProperty( event, \"pageX\", {","\t\t\t\t\tget: function() {","\t\t\t\t\t\treturn options.clientX +","\t\t\t\t\t\t\t( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) -","\t\t\t\t\t\t\t( doc && doc.clientLeft || body && body.clientLeft || 0 );","\t\t\t\t\t}","\t\t\t\t});","\t\t\t\tObject.defineProperty( event, \"pageY\", {","\t\t\t\t\tget: function() {","\t\t\t\t\t\treturn options.clientY +","\t\t\t\t\t\t\t( doc && doc.scrollTop || body && body.scrollTop || 0 ) -","\t\t\t\t\t\t\t( doc && doc.clientTop || body && body.clientTop || 0 );","\t\t\t\t\t}","\t\t\t\t});","\t\t\t}","\t\t} else if ( document.createEventObject ) {","\t\t\tevent = document.createEventObject();","\t\t\t$.extend( event, options );","\t\t\t// standards event.button uses constants defined here: http://msdn.microsoft.com/en-us/library/ie/ff974877(v=vs.85).aspx","\t\t\t// old IE event.button uses constants defined here: http://msdn.microsoft.com/en-us/library/ie/ms533544(v=vs.85).aspx","\t\t\t// so we actually need to map the standard back to oldIE","\t\t\tevent.button = {","\t\t\t\t0: 1,","\t\t\t\t1: 4,","\t\t\t\t2: 2","\t\t\t}[ event.button ] || ( event.button === -1 ? 0 : event.button );","\t\t}","","\t\treturn event;","\t},","","\tkeyEvent: function( type, options ) {","\t\tvar event;","\t\toptions = $.extend({","\t\t\tbubbles: true,","\t\t\tcancelable: true,","\t\t\tview: window,","\t\t\tctrlKey: false,","\t\t\taltKey: false,","\t\t\tshiftKey: false,","\t\t\tmetaKey: false,","\t\t\tkeyCode: 0,","\t\t\tcharCode: undefined","\t\t}, options );","","\t\tif ( document.createEvent ) {","\t\t\ttry {","\t\t\t\tevent = document.createEvent( \"KeyEvents\" );","\t\t\t\tevent.initKeyEvent( type, options.bubbles, options.cancelable, options.view,","\t\t\t\t\toptions.ctrlKey, options.altKey, options.shiftKey, options.metaKey,","\t\t\t\t\toptions.keyCode, options.charCode );","\t\t\t// initKeyEvent throws an exception in WebKit","\t\t\t// see: http://stackoverflow.com/questions/6406784/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution","\t\t\t// and also https://bugs.webkit.org/show_bug.cgi?id=13368","\t\t\t// fall back to a generic event until we decide to implement initKeyboardEvent","\t\t\t} catch( err ) {","\t\t\t\tevent = document.createEvent( \"Events\" );","\t\t\t\tevent.initEvent( type, options.bubbles, options.cancelable );","\t\t\t\t$.extend( event, {","\t\t\t\t\tview: options.view,","\t\t\t\t\tctrlKey: options.ctrlKey,","\t\t\t\t\taltKey: options.altKey,","\t\t\t\t\tshiftKey: options.shiftKey,","\t\t\t\t\tmetaKey: options.metaKey,","\t\t\t\t\tkeyCode: options.keyCode,","\t\t\t\t\tcharCode: options.charCode","\t\t\t\t});","\t\t\t}","\t\t} else if ( document.createEventObject ) {","\t\t\tevent = document.createEventObject();","\t\t\t$.extend( event, options );","\t\t}","","\t\tif ( !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() ) || (({}).toString.call( window.opera ) === \"[object Opera]\") ) {","\t\t\tevent.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;","\t\t\tevent.charCode = undefined;","\t\t}","","\t\treturn event;","\t},","","\tdispatchEvent: function( elem, type, event ) {","\t\tif ( elem[ type ] ) {","\t\t\telem[ type ]();","\t\t} else if ( elem.dispatchEvent ) {","\t\t\telem.dispatchEvent( event );","\t\t} else if ( elem.fireEvent ) {","\t\t\telem.fireEvent( \"on\" + type, event );","\t\t}","\t},","","\tsimulateFocus: function() {","\t\tvar focusinEvent,","\t\t\ttriggered = false,","\t\t\telement = $( this.target );","","\t\tfunction trigger() {","\t\t\ttriggered = true;","\t\t}","","\t\telement.bind( \"focus\", trigger );","\t\telement[ 0 ].focus();","","\t\tif ( !triggered ) {","\t\t\tfocusinEvent = $.Event( \"focusin\" );","\t\t\tfocusinEvent.preventDefault();","\t\t\telement.trigger( focusinEvent );","\t\t\telement.triggerHandler( \"focus\" );","\t\t}","\t\telement.unbind( \"focus\", trigger );","\t},","","\tsimulateBlur: function() {","\t\tvar focusoutEvent,","\t\t\ttriggered = false,","\t\t\telement = $( this.target );","","\t\tfunction trigger() {","\t\t\ttriggered = true;","\t\t}","","\t\telement.bind( \"blur\", trigger );","\t\telement[ 0 ].blur();","","\t\t// blur events are async in IE","\t\tsetTimeout(function() {","\t\t\t// IE won't let the blur occur if the window is inactive","\t\t\tif ( element[ 0 ].ownerDocument.activeElement === element[ 0 ] ) {","\t\t\t\telement[ 0 ].ownerDocument.body.focus();","\t\t\t}","","\t\t\t// Firefox won't trigger events if the window is inactive","\t\t\t// IE doesn't trigger events if we had to manually focus the body","\t\t\tif ( !triggered ) {","\t\t\t\tfocusoutEvent = $.Event( \"focusout\" );","\t\t\t\tfocusoutEvent.preventDefault();","\t\t\t\telement.trigger( focusoutEvent );","\t\t\t\telement.triggerHandler( \"blur\" );","\t\t\t}","\t\t\telement.unbind( \"blur\", trigger );","\t\t}, 1 );","\t}","});","","","","/** complex events **/","","function findCenter( elem ) {","\tvar offset,","\t\tdocument = $( elem.ownerDocument );","\telem = $( elem );","\toffset = elem.offset();","","\treturn {","\t\tx: offset.left + elem.outerWidth() / 2 - document.scrollLeft(),","\t\ty: offset.top + elem.outerHeight() / 2 - document.scrollTop()","\t};","}","","function findCorner( elem ) {","\tvar offset,","\t\tdocument = $( elem.ownerDocument );","\telem = $( elem );","\toffset = elem.offset();","","\treturn {","\t\tx: offset.left - document.scrollLeft(),","\t\ty: offset.top - document.scrollTop()","\t};","}","","$.extend( $.simulate.prototype, {","\tsimulateDrag: function() {","\t\tvar i = 0,","\t\t\ttarget = this.target,","\t\t\teventDoc = target.ownerDocument,","\t\t\toptions = this.options,","\t\t\tcenter = options.handle === \"corner\" ? findCorner( target ) : findCenter( target ),","\t\t\tx = Math.floor( center.x ),","\t\t\ty = Math.floor( center.y ),","\t\t\tcoord = { clientX: x, clientY: y },","\t\t\tdx = options.dx || ( options.x !== undefined ? options.x - x : 0 ),","\t\t\tdy = options.dy || ( options.y !== undefined ? options.y - y : 0 ),","\t\t\tmoves = options.moves || 3;","","\t\tthis.simulateEvent( target, \"mousedown\", coord );","","\t\tfor ( ; i < moves ; i++ ) {","\t\t\tx += dx / moves;","\t\t\ty += dy / moves;","","\t\t\tcoord = {","\t\t\t\tclientX: Math.round( x ),","\t\t\t\tclientY: Math.round( y )","\t\t\t};","","\t\t\tthis.simulateEvent( eventDoc, \"mousemove\", coord );","\t\t}","","\t\tif ( $.contains( eventDoc, target ) ) {","\t\t\tthis.simulateEvent( target, \"mouseup\", coord );","\t\t\tthis.simulateEvent( target, \"click\", coord );","\t\t} else {","\t\t\tthis.simulateEvent( eventDoc, \"mouseup\", coord );","\t\t}","\t}","});","","})( jQuery );"],"id":1}]]},"ace":{"folds":[],"scrolltop":6026,"scrollleft":0,"selection":{"start":{"row":330,"column":13},"end":{"row":330,"column":13},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":333,"mode":"ace/mode/javascript"}},"timestamp":1443535774854,"hash":"9a9b026aceb432cbec73550cb874a5461dffe2f5"}